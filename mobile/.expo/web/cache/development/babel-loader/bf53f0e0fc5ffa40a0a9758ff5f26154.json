{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport { NativeWindStyleSheet as _NativeWindStyleSheet } from \"nativewind\";\nimport { StyledComponent as _StyledComponent } from \"nativewind\";\nimport { useState, useCallback } from \"react\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { useNavigation, useFocusEffect } from \"@react-navigation/native\";\nimport { api } from \"../lib/axios\";\nimport { generateDatesFromYearBeginning } from \"../utils/generate-dates-from-year-beginning\";\nimport { DAY_SIZE, HabitDay } from \"../components/HabitDays\";\nimport { Header } from \"../components/Header\";\nimport { Loading } from \"../components/Loading\";\nimport dayjs from \"dayjs\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar weekDays = ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'];\nvar datesFromYearStart = generateDatesFromYearBeginning();\nvar minimumSummaryDatesSizes = 18 * 5 + 1;\nvar amountDaysToFill = minimumSummaryDatesSizes - datesFromYearStart.length;\nexport function Home() {\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    loading = _useState2[0],\n    setLoading = _useState2[1];\n  var _useState3 = useState(null),\n    _useState4 = _slicedToArray(_useState3, 2),\n    summary = _useState4[0],\n    setSummary = _useState4[1];\n  var _useNavigation = useNavigation(),\n    navigate = _useNavigation.navigate;\n  function fetchData() {\n    return _fetchData.apply(this, arguments);\n  }\n  function _fetchData() {\n    _fetchData = _asyncToGenerator(function* () {\n      try {\n        setLoading(true);\n        var response = yield api.get('/summary');\n        console.log(response.data);\n        setSummary(response.data);\n      } catch (error) {\n        Alert.alert('Ops', 'Não foi possível carregar o sumário de hábitos.');\n        console.log(error);\n      } finally {\n        setLoading(false);\n      }\n    });\n    return _fetchData.apply(this, arguments);\n  }\n  useFocusEffect(useCallback(function () {\n    fetchData();\n  }, []));\n  if (loading) {\n    return _jsx(Loading, {});\n  }\n  return _jsxs(_StyledComponent, {\n    className: \"flex-1 bg-background px-8 pt-16\",\n    component: View,\n    children: [_jsx(Header, {}), _jsx(_StyledComponent, {\n      className: \"flex-row mt-6 mb-2\",\n      component: View,\n      children: weekDays.map(function (weekDay, i) {\n        return _jsx(_StyledComponent, {\n          className: \"text-zinc-400 text-xl font-bold text-center mx-1\",\n          style: {\n            width: DAY_SIZE\n          },\n          component: Text,\n          children: weekDay\n        }, weekDay + \"-\" + i);\n      })\n    }), _jsx(ScrollView, {\n      showsVerticalScrollIndicator: false,\n      contentContainerStyle: {\n        paddingBottom: 100\n      },\n      children: summary && _jsxs(_StyledComponent, {\n        className: \"flex-row flex-wrap\",\n        component: View,\n        children: [datesFromYearStart.map(function (date) {\n          var dayWithHabits = summary.find(function (day) {\n            return dayjs(date).isSame(day.date, 'day');\n          });\n          return _jsx(HabitDay, {\n            date: date,\n            amountOfHabits: dayWithHabits == null ? void 0 : dayWithHabits.amount,\n            amountCompleted: dayWithHabits == null ? void 0 : dayWithHabits.completed,\n            onPress: function onPress() {\n              return navigate('habit', {\n                date: date.toISOString()\n              });\n            }\n          }, date.toISOString());\n        }), amountDaysToFill > 0 && Array.from({\n          length: amountDaysToFill\n        }).map(function (_, i) {\n          return _jsx(_StyledComponent, {\n            className: \"bg-zinc-900 rounded-lg border-2 m-1 border-zinc-800 opacity-40\",\n            style: {\n              width: DAY_SIZE,\n              height: DAY_SIZE\n            },\n            component: View\n          }, i);\n        })]\n      })\n    })]\n  });\n}\n_NativeWindStyleSheet.create({\n  styles: {\n    \"m-1\": {\n      \"marginTop\": 4,\n      \"marginRight\": 4,\n      \"marginBottom\": 4,\n      \"marginLeft\": 4\n    },\n    \"mx-1\": {\n      \"marginLeft\": 4,\n      \"marginRight\": 4\n    },\n    \"mt-6\": {\n      \"marginTop\": 24\n    },\n    \"mb-2\": {\n      \"marginBottom\": 8\n    },\n    \"flex-1\": {\n      \"flexGrow\": 1,\n      \"flexShrink\": 1,\n      \"flexBasis\": \"0%\"\n    },\n    \"flex-row\": {\n      \"flexDirection\": \"row\"\n    },\n    \"flex-wrap\": {\n      \"flexWrap\": \"wrap\"\n    },\n    \"rounded-lg\": {\n      \"borderTopLeftRadius\": 8,\n      \"borderTopRightRadius\": 8,\n      \"borderBottomRightRadius\": 8,\n      \"borderBottomLeftRadius\": 8\n    },\n    \"border-2\": {\n      \"borderTopWidth\": 2,\n      \"borderRightWidth\": 2,\n      \"borderBottomWidth\": 2,\n      \"borderLeftWidth\": 2\n    },\n    \"border-zinc-800\": {\n      \"borderTopColor\": \"#27272a\",\n      \"borderRightColor\": \"#27272a\",\n      \"borderBottomColor\": \"#27272a\",\n      \"borderLeftColor\": \"#27272a\"\n    },\n    \"bg-background\": {\n      \"backgroundColor\": \"#09090A\"\n    },\n    \"bg-zinc-900\": {\n      \"backgroundColor\": \"#18181b\"\n    },\n    \"px-8\": {\n      \"paddingLeft\": 32,\n      \"paddingRight\": 32\n    },\n    \"pt-16\": {\n      \"paddingTop\": 64\n    },\n    \"text-center\": {\n      \"textAlign\": \"center\"\n    },\n    \"font-bold\": {\n      \"fontFamily\": \"Inter_700Bold\",\n      \"fontWeight\": \"700\"\n    },\n    \"text-zinc-400\": {\n      \"color\": \"#a1a1aa\"\n    },\n    \"opacity-40\": {\n      \"opacity\": 0.4\n    },\n    \"text-xl\": {\n      \"fontSize\": 20,\n      \"lineHeight\": 28\n    }\n  }\n});","map":{"version":3,"names":["useState","useCallback","useNavigation","useFocusEffect","api","generateDatesFromYearBeginning","DAY_SIZE","HabitDay","Header","Loading","dayjs","weekDays","datesFromYearStart","minimumSummaryDatesSizes","amountDaysToFill","length","Home","loading","setLoading","summary","setSummary","navigate","fetchData","response","get","console","log","data","error","Alert","alert","map","weekDay","i","width","paddingBottom","date","dayWithHabits","find","day","isSame","amount","completed","toISOString","Array","from","_","height"],"sources":["/home/gabrielviol/AULAS/nlw/nlw-setup/mobile/src/screens/Home.tsx"],"sourcesContent":["import { useState, useCallback } from \"react\";\nimport { Text, View, ScrollView, Alert } from \"react-native\";\nimport { useNavigation, useFocusEffect } from \"@react-navigation/native\";\n\nimport { api } from '../lib/axios'\nimport { generateDatesFromYearBeginning } from '../utils/generate-dates-from-year-beginning'\n\nimport { DAY_SIZE, HabitDay } from \"../components/HabitDays\";\nimport { Header } from \"../components/Header\";\nimport { Loading } from \"../components/Loading\";\nimport dayjs from \"dayjs\";\n\ntype SummaryProps = Array<{\n    id: string;\n    date: string;\n    amount: number;\n    completed: number;\n}>\n\nconst weekDays = ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'];\nconst datesFromYearStart = generateDatesFromYearBeginning();\nconst minimumSummaryDatesSizes = 18 * 5 + 1;\nconst amountDaysToFill = minimumSummaryDatesSizes - datesFromYearStart.length;\n\nexport function Home() {\n    const [loading, setLoading] = useState(true);\n    const [summary, setSummary] = useState<SummaryProps | null>(null);\n\n    const { navigate } = useNavigation();\n\n    async function fetchData(){\n        try {\n            setLoading(true)\n            const response = await api.get('/summary')\n            console.log(response.data)\n            setSummary(response.data)\n        } catch(error){\n            Alert.alert('Ops', 'Não foi possível carregar o sumário de hábitos.')\n            console.log(error);\n        } finally{\n            setLoading(false)\n        }\n    }\n\n    useFocusEffect(useCallback(() => {\n        fetchData();\n    }, []));\n\n    if(loading){\n        return(\n            <Loading />\n        )\n    }\n\n    return (\n        <View className=\"flex-1 bg-background px-8 pt-16\">\n            <Header />\n\n            <View className=\"flex-row mt-6 mb-2\">\n                {\n                    weekDays.map((weekDay, i) => (\n                        <Text\n                            key={`${weekDay}-${i}`}\n                            className=\"text-zinc-400 text-xl font-bold text-center mx-1\"\n                            style={{ width: DAY_SIZE }}\n                        >\n                            {weekDay}\n                        </Text>\n\n                    ))\n                }\n            </View>\n            <ScrollView \n                showsVerticalScrollIndicator={false}\n                contentContainerStyle={{ paddingBottom: 100 }}\n            >\n                {\n                    summary &&\n                    <View className=\"flex-row flex-wrap\">\n                    {\n                        datesFromYearStart.map(date => {\n                            const dayWithHabits = summary.find(day => {\n                                return dayjs(date).isSame(day.date, 'day')\n                            })\n                            return (\n                                <HabitDay\n                                    key={date.toISOString()}\n                                    date={date}\n                                    amountOfHabits={dayWithHabits?.amount}\n                                    amountCompleted={dayWithHabits?.completed}\n                                    onPress={() => navigate('habit', { date: date.toISOString() })}\n                                />\n                            )\n                        })\n                    }\n\n                    {\n                        amountDaysToFill > 0 && Array\n                            .from({ length: amountDaysToFill })\n                            .map((_, i) => (\n                                <View\n                                    key={i}\n                                    className=\"bg-zinc-900 rounded-lg border-2 m-1 border-zinc-800 opacity-40\"\n                                    style={{ width: DAY_SIZE, height: DAY_SIZE }}\n                                />\n                            ))\n                    }\n                </View>\n                }\n            </ScrollView>\n\n        </View>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}